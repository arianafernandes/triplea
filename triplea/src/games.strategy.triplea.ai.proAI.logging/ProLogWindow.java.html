<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>ProLogWindow.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">test (25/nov/2016 10:16:58)</a> &gt; <a href="../../index.html" class="el_group">triplea</a> &gt; <a href="../index.html" class="el_bundle">src</a> &gt; <a href="index.source.html" class="el_package">games.strategy.triplea.ai.proAI.logging</a> &gt; <span class="el_source">ProLogWindow.java</span></div><h1>ProLogWindow.java</h1><pre class="source lang-java linenums"><span class="nc" id="L1">package games.strategy.triplea.ai.proAI.logging;</span>

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.GridLayout;
import java.util.logging.Level;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;

import games.strategy.triplea.ui.TripleAFrame;
import games.strategy.ui.SwingAction;

/**
 * GUI class used to display logging window and logging settings.
 */
public class ProLogWindow extends javax.swing.JDialog {
  private static final long serialVersionUID = -5989598624017028122L;

  /** Creates new form SettingsWindow */
  public ProLogWindow(final TripleAFrame frame) {
<span class="nc" id="L27">    super(frame);</span>
<span class="nc" id="L28">    initComponents();</span>
<span class="nc" id="L29">  }</span>

  public void clear() {
<span class="nc" id="L32">    this.dispose();</span>
<span class="nc" id="L33">    v_tabPaneMain = null;</span>
<span class="nc" id="L34">    v_logHolderTabbedPane = null;</span>
<span class="nc" id="L35">  }</span>

  private void initComponents() {
<span class="nc" id="L38">    final java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();</span>
    java.awt.GridBagConstraints gridBagConstraints;
<span class="nc" id="L40">    final JPanel jPanel7 = new JPanel();</span>
<span class="nc" id="L41">    final JButton v_restoreDefaultsButton = new JButton();</span>
<span class="nc" id="L42">    final JButton v_settingsDetailsButton = new JButton();</span>
<span class="nc" id="L43">    final JPanel jPanel14 = new JPanel();</span>
<span class="nc" id="L44">    final JPanel jPanel13 = new JPanel();</span>
<span class="nc" id="L45">    final JButton v_cancelButton = new JButton();</span>
<span class="nc" id="L46">    final JButton v_okButton = new JButton();</span>
<span class="nc" id="L47">    v_tabPaneMain = new javax.swing.JTabbedPane();</span>
<span class="nc" id="L48">    final JPanel jPanel8 = new JPanel();</span>
<span class="nc" id="L49">    v_logHolderTabbedPane = new javax.swing.JTabbedPane();</span>
<span class="nc" id="L50">    final JPanel jPanel9 = new JPanel();</span>
<span class="nc" id="L51">    final JScrollPane v_aiOutputLogAreaScrollPane = new JScrollPane();</span>
<span class="nc" id="L52">    v_aiOutputLogArea = new javax.swing.JTextArea();</span>
<span class="nc" id="L53">    v_enableAILogging = new javax.swing.JCheckBox();</span>
<span class="nc" id="L54">    final javax.swing.JLabel jLabel15 = new javax.swing.JLabel();</span>
<span class="nc" id="L55">    v_logDepth = new javax.swing.JComboBox&lt;&gt;();</span>
<span class="nc" id="L56">    v_limitLogHistoryToSpinner = new javax.swing.JSpinner();</span>
<span class="nc" id="L57">    v_limitLogHistoryCB = new javax.swing.JCheckBox();</span>
<span class="nc" id="L58">    final javax.swing.JLabel jLabel46 = new javax.swing.JLabel();</span>
<span class="nc" id="L59">    final JPanel v_pauseAIs = new JPanel();</span>
<span class="nc" id="L60">    setTitle(&quot;Hard AI Settings&quot;);</span>
<span class="nc" id="L61">    setMinimumSize(new java.awt.Dimension(775, 400));</span>
<span class="nc" id="L62">    addWindowListener(new java.awt.event.WindowAdapter() {</span>
      @Override
      public void windowClosing(final java.awt.event.WindowEvent evt) {
<span class="nc" id="L65">        formWindowClosing(evt);</span>
<span class="nc" id="L66">      }</span>

      @Override
      public void windowOpened(final java.awt.event.WindowEvent evt) {
<span class="nc" id="L70">        formWindowOpened(evt);</span>
<span class="nc" id="L71">      }</span>
    });
<span class="nc" id="L73">    getContentPane().setLayout(new java.awt.GridBagLayout());</span>
<span class="nc" id="L74">    jPanel7.setName(&quot;jPanel3&quot;);</span>
<span class="nc" id="L75">    jPanel7.setPreferredSize(new java.awt.Dimension(600, 45));</span>
<span class="nc" id="L76">    jPanel7.setLayout(new java.awt.GridBagLayout());</span>
<span class="nc" id="L77">    v_restoreDefaultsButton.setText(&quot;Restore Defaults&quot;);</span>
<span class="nc" id="L78">    v_restoreDefaultsButton.setMinimumSize(new java.awt.Dimension(118, 23));</span>
<span class="nc" id="L79">    v_restoreDefaultsButton.setName(&quot;v_restoreDefaultsButton&quot;);</span>
<span class="nc" id="L80">    v_restoreDefaultsButton.setPreferredSize(new java.awt.Dimension(118, 23));</span>
<span class="nc" id="L81">    v_restoreDefaultsButton.addActionListener(evt -&gt; v_restoreDefaultsButtonActionPerformed(evt));</span>
<span class="nc" id="L82">    gridBagConstraints = new java.awt.GridBagConstraints();</span>
<span class="nc" id="L83">    gridBagConstraints.gridx = 0;</span>
<span class="nc" id="L84">    gridBagConstraints.gridy = 0;</span>
<span class="nc" id="L85">    gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;</span>
<span class="nc" id="L86">    gridBagConstraints.insets = new java.awt.Insets(11, 0, 11, 0);</span>
<span class="nc" id="L87">    jPanel7.add(v_restoreDefaultsButton, gridBagConstraints);</span>
<span class="nc" id="L88">    v_settingsDetailsButton.setText(&quot;Settings Details&quot;);</span>
<span class="nc" id="L89">    v_settingsDetailsButton.setMinimumSize(new java.awt.Dimension(115, 23));</span>
<span class="nc" id="L90">    v_settingsDetailsButton.setName(&quot;v_settingsDetailsButton&quot;);</span>
<span class="nc" id="L91">    v_settingsDetailsButton.setPreferredSize(new java.awt.Dimension(115, 23));</span>
<span class="nc" id="L92">    v_settingsDetailsButton.addActionListener(evt -&gt; v_settingsDetailsButtonActionPerformed(evt));</span>
<span class="nc" id="L93">    gridBagConstraints = new java.awt.GridBagConstraints();</span>
<span class="nc" id="L94">    gridBagConstraints.gridx = 2;</span>
<span class="nc" id="L95">    gridBagConstraints.gridy = 0;</span>
<span class="nc" id="L96">    gridBagConstraints.anchor = java.awt.GridBagConstraints.EAST;</span>
<span class="nc" id="L97">    gridBagConstraints.insets = new java.awt.Insets(11, 6, 11, 0);</span>
<span class="nc" id="L98">    jPanel7.add(v_settingsDetailsButton, gridBagConstraints);</span>
<span class="nc" id="L99">    jPanel14.setName(&quot;jPanel14&quot;);</span>
<span class="nc" id="L100">    jPanel14.setLayout(new java.awt.GridBagLayout());</span>
<span class="nc" id="L101">    jPanel13.setName(&quot;jPanel13&quot;);</span>
<span class="nc" id="L102">    jPanel13.setLayout(new java.awt.GridBagLayout());</span>
<span class="nc" id="L103">    v_cancelButton.setText(&quot;Cancel&quot;);</span>
<span class="nc" id="L104">    v_cancelButton.setName(&quot;v_cancelButton&quot;);</span>
<span class="nc" id="L105">    v_cancelButton.addActionListener(evt -&gt; v_cancelButtonActionPerformed(evt));</span>
<span class="nc" id="L106">    gridBagConstraints = new java.awt.GridBagConstraints();</span>
<span class="nc" id="L107">    gridBagConstraints.gridx = 1;</span>
<span class="nc" id="L108">    gridBagConstraints.gridy = 0;</span>
<span class="nc" id="L109">    gridBagConstraints.insets = new java.awt.Insets(0, 10, 0, 0);</span>
<span class="nc" id="L110">    jPanel13.add(v_cancelButton, gridBagConstraints);</span>
<span class="nc" id="L111">    v_okButton.setText(&quot;OK&quot;);</span>
<span class="nc" id="L112">    v_okButton.setName(&quot;v_okButton&quot;);</span>
<span class="nc" id="L113">    v_okButton.addActionListener(evt -&gt; v_okButtonActionPerformed(evt));</span>
<span class="nc" id="L114">    gridBagConstraints = new java.awt.GridBagConstraints();</span>
<span class="nc" id="L115">    gridBagConstraints.gridx = 0;</span>
<span class="nc" id="L116">    gridBagConstraints.gridy = 0;</span>
<span class="nc" id="L117">    jPanel13.add(v_okButton, gridBagConstraints);</span>
<span class="nc" id="L118">    gridBagConstraints = new java.awt.GridBagConstraints();</span>
<span class="nc" id="L119">    gridBagConstraints.gridx = 0;</span>
<span class="nc" id="L120">    gridBagConstraints.gridy = 0;</span>
<span class="nc" id="L121">    jPanel14.add(jPanel13, gridBagConstraints);</span>
<span class="nc" id="L122">    gridBagConstraints = new java.awt.GridBagConstraints();</span>
<span class="nc" id="L123">    gridBagConstraints.gridx = 1;</span>
<span class="nc" id="L124">    gridBagConstraints.gridy = 0;</span>
<span class="nc" id="L125">    gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;</span>
<span class="nc" id="L126">    gridBagConstraints.weightx = 99.0;</span>
<span class="nc" id="L127">    gridBagConstraints.insets = new java.awt.Insets(11, 6, 11, 0);</span>
<span class="nc" id="L128">    jPanel7.add(jPanel14, gridBagConstraints);</span>
<span class="nc" id="L129">    gridBagConstraints = new java.awt.GridBagConstraints();</span>
<span class="nc" id="L130">    gridBagConstraints.gridx = 0;</span>
<span class="nc" id="L131">    gridBagConstraints.gridy = 1;</span>
<span class="nc" id="L132">    gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;</span>
<span class="nc" id="L133">    gridBagConstraints.weightx = 99.0;</span>
<span class="nc" id="L134">    gridBagConstraints.insets = new java.awt.Insets(0, 7, 0, 7);</span>
<span class="nc" id="L135">    getContentPane().add(jPanel7, gridBagConstraints);</span>
<span class="nc" id="L136">    v_tabPaneMain.setTabLayoutPolicy(javax.swing.JTabbedPane.SCROLL_TAB_LAYOUT);</span>
<span class="nc" id="L137">    v_tabPaneMain.setName(&quot;v_tabPaneMain&quot;);</span>
<span class="nc" id="L138">    v_tabPaneMain.setPreferredSize(new java.awt.Dimension(500, screenSize.height - 200));</span>
<span class="nc" id="L139">    jPanel8.setName(&quot;jPanel8&quot;);</span>
<span class="nc" id="L140">    jPanel8.setPreferredSize(new java.awt.Dimension(500, 314));</span>
<span class="nc" id="L141">    jPanel8.setLayout(new java.awt.GridBagLayout());</span>
<span class="nc" id="L142">    v_logHolderTabbedPane.setTabLayoutPolicy(javax.swing.JTabbedPane.SCROLL_TAB_LAYOUT);</span>
<span class="nc" id="L143">    v_logHolderTabbedPane.setFont(new java.awt.Font(&quot;Segoe UI&quot;, 0, 10));</span>
<span class="nc" id="L144">    v_logHolderTabbedPane.setName(&quot;v_logHolderTabbedPane&quot;);</span>
<span class="nc" id="L145">    jPanel9.setName(&quot;jPanel9&quot;);</span>
<span class="nc" id="L146">    jPanel9.setLayout(new java.awt.GridLayout(1, 0));</span>
<span class="nc" id="L147">    v_aiOutputLogAreaScrollPane.setName(&quot;v_aiOutputLogAreaScrollPane&quot;);</span>
<span class="nc" id="L148">    v_aiOutputLogArea.setColumns(20);</span>
<span class="nc" id="L149">    v_aiOutputLogArea.setEditable(false);</span>
<span class="nc" id="L150">    v_aiOutputLogArea.setFont(new java.awt.Font(&quot;Segoe UI&quot;, 0, 10));</span>
<span class="nc" id="L151">    v_aiOutputLogArea.setRows(5);</span>
<span class="nc" id="L152">    v_aiOutputLogArea.setName(&quot;v_aiOutputLogArea&quot;);</span>
<span class="nc" id="L153">    v_aiOutputLogAreaScrollPane.setViewportView(v_aiOutputLogArea);</span>
<span class="nc" id="L154">    jPanel9.add(v_aiOutputLogAreaScrollPane);</span>
<span class="nc" id="L155">    v_logHolderTabbedPane.addTab(&quot;Pre-Game&quot;, jPanel9);</span>
<span class="nc" id="L156">    gridBagConstraints = new java.awt.GridBagConstraints();</span>
<span class="nc" id="L157">    gridBagConstraints.gridx = 0;</span>
<span class="nc" id="L158">    gridBagConstraints.gridy = 1;</span>
<span class="nc" id="L159">    gridBagConstraints.gridwidth = 7;</span>
<span class="nc" id="L160">    gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;</span>
<span class="nc" id="L161">    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;</span>
<span class="nc" id="L162">    gridBagConstraints.weightx = 99.0;</span>
<span class="nc" id="L163">    gridBagConstraints.weighty = 99.0;</span>
<span class="nc" id="L164">    gridBagConstraints.insets = new java.awt.Insets(7, 7, 7, 7);</span>
<span class="nc" id="L165">    jPanel8.add(v_logHolderTabbedPane, gridBagConstraints);</span>
<span class="nc" id="L166">    v_enableAILogging.setSelected(true);</span>
<span class="nc" id="L167">    v_enableAILogging.setText(&quot;Enable AI Logging&quot;);</span>
<span class="nc" id="L168">    v_enableAILogging.setName(&quot;v_enableAILogging&quot;);</span>
<span class="nc" id="L169">    v_enableAILogging.addChangeListener(evt -&gt; v_enableAILoggingStateChanged(evt));</span>
<span class="nc" id="L170">    gridBagConstraints = new java.awt.GridBagConstraints();</span>
<span class="nc" id="L171">    gridBagConstraints.gridx = 0;</span>
<span class="nc" id="L172">    gridBagConstraints.gridy = 0;</span>
<span class="nc" id="L173">    gridBagConstraints.insets = new java.awt.Insets(7, 7, 0, 0);</span>
<span class="nc" id="L174">    jPanel8.add(v_enableAILogging, gridBagConstraints);</span>
<span class="nc" id="L175">    jLabel15.setText(&quot;Log Depth:&quot;);</span>
<span class="nc" id="L176">    jLabel15.setName(&quot;jLabel15&quot;);</span>
<span class="nc" id="L177">    gridBagConstraints = new java.awt.GridBagConstraints();</span>
<span class="nc" id="L178">    gridBagConstraints.gridx = 1;</span>
<span class="nc" id="L179">    gridBagConstraints.gridy = 0;</span>
<span class="nc" id="L180">    gridBagConstraints.insets = new java.awt.Insets(7, 12, 0, 0);</span>
<span class="nc" id="L181">    jPanel8.add(jLabel15, gridBagConstraints);</span>
<span class="nc" id="L182">    v_logDepth.setModel(new javax.swing.DefaultComboBoxModel&lt;&gt;(new String[] {&quot;Fine&quot;, &quot;Finer&quot;, &quot;Finest&quot;}));</span>
<span class="nc" id="L183">    v_logDepth.setSelectedItem(v_logDepth.getItemAt(2));</span>
<span class="nc" id="L184">    v_logDepth.setName(&quot;v_logDepth&quot;);</span>
<span class="nc" id="L185">    gridBagConstraints = new java.awt.GridBagConstraints();</span>
<span class="nc" id="L186">    gridBagConstraints.gridx = 2;</span>
<span class="nc" id="L187">    gridBagConstraints.gridy = 0;</span>
<span class="nc" id="L188">    gridBagConstraints.insets = new java.awt.Insets(7, 5, 0, 0);</span>
<span class="nc" id="L189">    jPanel8.add(v_logDepth, gridBagConstraints);</span>
<span class="nc" id="L190">    v_limitLogHistoryToSpinner.setModel(new javax.swing.SpinnerNumberModel(5, 1, 100, 1));</span>
<span class="nc" id="L191">    v_limitLogHistoryToSpinner.setMinimumSize(new java.awt.Dimension(60, 20));</span>
<span class="nc" id="L192">    v_limitLogHistoryToSpinner.setName(&quot;v_limitLogHistoryToSpinner&quot;);</span>
<span class="nc" id="L193">    v_limitLogHistoryToSpinner.setPreferredSize(new java.awt.Dimension(60, 20));</span>
<span class="nc" id="L194">    gridBagConstraints = new java.awt.GridBagConstraints();</span>
<span class="nc" id="L195">    gridBagConstraints.gridx = 5;</span>
<span class="nc" id="L196">    gridBagConstraints.gridy = 0;</span>
<span class="nc" id="L197">    gridBagConstraints.ipadx = 10;</span>
<span class="nc" id="L198">    gridBagConstraints.insets = new java.awt.Insets(7, 0, 0, 0);</span>
<span class="nc" id="L199">    jPanel8.add(v_limitLogHistoryToSpinner, gridBagConstraints);</span>
<span class="nc" id="L200">    v_limitLogHistoryCB.setSelected(true);</span>
<span class="nc" id="L201">    v_limitLogHistoryCB.setText(&quot;Limit Log History To:&quot;);</span>
<span class="nc" id="L202">    v_limitLogHistoryCB.setName(&quot;v_limitLogHistoryCB&quot;);</span>
<span class="nc" id="L203">    v_limitLogHistoryCB.addChangeListener(evt -&gt; v_limitLogHistoryCBStateChanged(evt));</span>
<span class="nc" id="L204">    gridBagConstraints = new java.awt.GridBagConstraints();</span>
<span class="nc" id="L205">    gridBagConstraints.gridx = 4;</span>
<span class="nc" id="L206">    gridBagConstraints.gridy = 0;</span>
<span class="nc" id="L207">    gridBagConstraints.insets = new java.awt.Insets(7, 0, 0, 12);</span>
<span class="nc" id="L208">    jPanel8.add(v_limitLogHistoryCB, gridBagConstraints);</span>
<span class="nc" id="L209">    jLabel46.setText(&quot;rounds&quot;);</span>
<span class="nc" id="L210">    jLabel46.setName(&quot;jLabel46&quot;);</span>
<span class="nc" id="L211">    gridBagConstraints = new java.awt.GridBagConstraints();</span>
<span class="nc" id="L212">    gridBagConstraints.gridx = 6;</span>
<span class="nc" id="L213">    gridBagConstraints.gridy = 0;</span>
<span class="nc" id="L214">    gridBagConstraints.insets = new java.awt.Insets(7, 5, 0, 7);</span>
<span class="nc" id="L215">    jPanel8.add(jLabel46, gridBagConstraints);</span>
<span class="nc" id="L216">    gridBagConstraints = new java.awt.GridBagConstraints();</span>
<span class="nc" id="L217">    gridBagConstraints.gridx = 3;</span>
<span class="nc" id="L218">    gridBagConstraints.gridy = 0;</span>
<span class="nc" id="L219">    gridBagConstraints.weightx = 99.0;</span>
<span class="nc" id="L220">    gridBagConstraints.insets = new java.awt.Insets(7, 0, 0, 0);</span>
<span class="nc" id="L221">    jPanel8.add(v_pauseAIs, gridBagConstraints);</span>
<span class="nc" id="L222">    v_tabPaneMain.addTab(&quot;Debugging&quot;, jPanel8);</span>
<span class="nc" id="L223">    gridBagConstraints = new java.awt.GridBagConstraints();</span>
<span class="nc" id="L224">    gridBagConstraints.gridx = 0;</span>
<span class="nc" id="L225">    gridBagConstraints.gridy = 0;</span>
<span class="nc" id="L226">    gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;</span>
<span class="nc" id="L227">    gridBagConstraints.weightx = 99.0;</span>
<span class="nc" id="L228">    gridBagConstraints.weighty = 99.0;</span>
<span class="nc" id="L229">    gridBagConstraints.insets = new java.awt.Insets(7, 7, 0, 7);</span>
<span class="nc" id="L230">    getContentPane().add(v_tabPaneMain, gridBagConstraints);</span>
<span class="nc" id="L231">    setBounds((screenSize.width - 800), 25, 775, 401);</span>
<span class="nc" id="L232">  }</span>

  private void formWindowOpened(final java.awt.event.WindowEvent evt) {
<span class="nc" id="L235">    loadSettings(ProLogSettings.loadSettings());</span>
<span class="nc" id="L236">    this.pack();</span>
<span class="nc" id="L237">  }</span>

  /**
   * Loads the settings provided and displays it in this settings window.
   *
   * @param settings
   */
  private void loadSettings(final ProLogSettings settings) {
<span class="nc" id="L245">    v_enableAILogging.setSelected(settings.EnableAILogging);</span>
<span class="nc bnc" id="L246" title="All 2 branches missed.">    if (settings.AILoggingDepth.equals(Level.FINE)) {</span>
<span class="nc" id="L247">      v_logDepth.setSelectedIndex(0);</span>
<span class="nc bnc" id="L248" title="All 2 branches missed.">    } else if (settings.AILoggingDepth.equals(Level.FINER)) {</span>
<span class="nc" id="L249">      v_logDepth.setSelectedIndex(1);</span>
<span class="nc bnc" id="L250" title="All 2 branches missed.">    } else if (settings.AILoggingDepth.equals(Level.FINEST)) {</span>
<span class="nc" id="L251">      v_logDepth.setSelectedIndex(2);</span>
    }
<span class="nc" id="L253">    v_limitLogHistoryCB.setSelected(settings.LimitLogHistory);</span>
<span class="nc" id="L254">    v_limitLogHistoryToSpinner.setValue(settings.LimitLogHistoryTo);</span>
<span class="nc" id="L255">  }</span>

  public ProLogSettings createSettings() {
<span class="nc" id="L258">    final ProLogSettings settings = new ProLogSettings();</span>
<span class="nc" id="L259">    settings.EnableAILogging = v_enableAILogging.isSelected();</span>
<span class="nc bnc" id="L260" title="All 2 branches missed.">    if (v_logDepth.getSelectedIndex() == 0) {</span>
<span class="nc" id="L261">      settings.AILoggingDepth = Level.FINE;</span>
<span class="nc bnc" id="L262" title="All 2 branches missed.">    } else if (v_logDepth.getSelectedIndex() == 1) {</span>
<span class="nc" id="L263">      settings.AILoggingDepth = Level.FINER;</span>
<span class="nc bnc" id="L264" title="All 2 branches missed.">    } else if (v_logDepth.getSelectedIndex() == 2) {</span>
<span class="nc" id="L265">      settings.AILoggingDepth = Level.FINEST;</span>
    }
<span class="nc" id="L267">    settings.LimitLogHistory = v_limitLogHistoryCB.isSelected();</span>
<span class="nc" id="L268">    settings.LimitLogHistoryTo = Integer.parseInt(v_limitLogHistoryToSpinner.getValue().toString());</span>
<span class="nc" id="L269">    return settings;</span>
  }

  private void v_restoreDefaultsButtonActionPerformed(final java.awt.event.ActionEvent evt) {
<span class="nc" id="L273">    final int result =</span>
<span class="nc" id="L274">        JOptionPane.showConfirmDialog(rootPane, &quot;Are you sure you want to reset all Dynamix AI settings?&quot;,</span>
<span class="nc" id="L275">            &quot;Reset Default Settings&quot;, JOptionPane.OK_CANCEL_OPTION, JOptionPane.QUESTION_MESSAGE);</span>
<span class="nc bnc" id="L276" title="All 2 branches missed.">    if (result == JOptionPane.OK_OPTION) {</span>
<span class="nc" id="L277">      final ProLogSettings defaultSettings = new ProLogSettings(); // Default settings are already contained in a new</span>
                                                                   // DSettings instance
<span class="nc" id="L279">      loadSettings(defaultSettings);</span>
<span class="nc" id="L280">      JOptionPane.showMessageDialog(rootPane,</span>
<span class="nc" id="L281">          &quot;Default settings restored.\r\n\r\n(If you don't want to keep these default settings, just hit cancel)&quot;,</span>
<span class="nc" id="L282">          &quot;Default Settings Restored&quot;, JOptionPane.INFORMATION_MESSAGE);</span>
    }
<span class="nc" id="L284">  }</span>

  private void v_enableAILoggingStateChanged(final javax.swing.event.ChangeEvent evt) {
<span class="nc" id="L287">    v_logDepth.setEnabled(v_enableAILogging.isSelected());</span>
<span class="nc" id="L288">    v_limitLogHistoryCB.setEnabled(v_enableAILogging.isSelected());</span>
<span class="nc" id="L289">  }</span>

  private void v_limitLogHistoryCBStateChanged(final javax.swing.event.ChangeEvent evt) {
<span class="nc bnc" id="L292" title="All 4 branches missed.">    v_limitLogHistoryToSpinner.setEnabled(v_limitLogHistoryCB.isSelected() &amp;&amp; v_enableAILogging.isSelected());</span>
<span class="nc" id="L293">  }</span>

  private void formWindowClosing(final java.awt.event.WindowEvent evt) {
<span class="nc" id="L296">    v_cancelButtonActionPerformed(null);</span>
<span class="nc" id="L297">  }</span>

  private void v_okButtonActionPerformed(final java.awt.event.ActionEvent evt) {
<span class="nc" id="L300">    final ProLogSettings settings = createSettings();</span>
<span class="nc" id="L301">    ProLogSettings.saveSettings(settings);</span>
<span class="nc" id="L302">    this.setVisible(false);</span>
<span class="nc" id="L303">  }</span>

  private void v_cancelButtonActionPerformed(final java.awt.event.ActionEvent evt) {
<span class="nc" id="L306">    final ProLogSettings settings = ProLogSettings.loadSettings();</span>
<span class="nc" id="L307">    loadSettings(settings);</span>
<span class="nc" id="L308">    this.setVisible(false);</span>
<span class="nc" id="L309">  }</span>

  private void v_settingsDetailsButtonActionPerformed(final java.awt.event.ActionEvent evt) {
<span class="nc" id="L312">    final JDialog dialog = new JDialog(this, &quot;Pro AI - Settings Details&quot;);</span>
<span class="nc" id="L313">    String message = &quot;&quot;;</span>
<span class="nc bnc" id="L314" title="All 2 branches missed.">    if (v_tabPaneMain.getSelectedIndex() == 0) // Debugging</span>
    {
<span class="nc" id="L316">      message = &quot;Debugging\r\n&quot; + &quot;\r\n&quot;</span>
          + &quot;AI Logging: When this is checked, the AI's will output their logs, as they come in, so you can see exactly what the AI is thinking.\r\n&quot;
          + &quot;Note that if you check this on, you still have to press OK then reopen the settings window for the logs to actually start displaying.\r\n&quot;
          + &quot;\r\n&quot;
          + &quot;Log Depth: This setting lets you choose how deep you want the AI logging to be. Fine only displays the high-level events, like the start of a phase, etc.\r\n&quot;
          + &quot;Finer displays medium-level events, such as attacks, reinforcements, etc.\r\n&quot;
          + &quot;Finest displays all the AI logging available. Can be used for detailed ananlysis, but is a lot harder to read through it.\r\n&quot;
          + &quot;\r\n&quot;
          + &quot;Pause AI's: This checkbox pauses all the Dynamix AI's while it's checked, so you can look at the logs without the AI's outputing floods of information.\r\n&quot;
          + &quot;\r\n&quot;
          + &quot;Limit Log History To X Rounds: If this is checked, the AI log information will be limited to X rounds of information.\r\n&quot;;
    }
<span class="nc" id="L328">    final JTextArea label = new JTextArea(message);</span>
<span class="nc" id="L329">    label.setFont(new Font(&quot;Segoe UI&quot;, Font.PLAIN, 12));</span>
<span class="nc" id="L330">    label.setEditable(false);</span>
<span class="nc" id="L331">    label.setAutoscrolls(true);</span>
<span class="nc" id="L332">    label.setLineWrap(false);</span>
<span class="nc" id="L333">    label.setFocusable(false);</span>
<span class="nc" id="L334">    label.setWrapStyleWord(true);</span>
<span class="nc" id="L335">    label.setLocation(0, 0);</span>
<span class="nc" id="L336">    dialog.setBackground(label.getBackground());</span>
<span class="nc" id="L337">    dialog.setLayout(new BorderLayout());</span>
<span class="nc" id="L338">    final JScrollPane pane = new JScrollPane();</span>
<span class="nc" id="L339">    pane.setHorizontalScrollBarPolicy(javax.swing.ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);</span>
<span class="nc" id="L340">    pane.setVerticalScrollBarPolicy(javax.swing.ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED);</span>
<span class="nc" id="L341">    pane.setViewportView(label);</span>
<span class="nc" id="L342">    dialog.add(pane, BorderLayout.CENTER);</span>
<span class="nc" id="L343">    final JButton button = new JButton(SwingAction.of(e -&gt; dialog.dispose()));</span>
<span class="nc" id="L344">    button.setText(&quot;Close&quot;);</span>
<span class="nc" id="L345">    button.setMinimumSize(new Dimension(100, 30));</span>
<span class="nc" id="L346">    dialog.add(button, BorderLayout.SOUTH);</span>
<span class="nc" id="L347">    dialog.setMinimumSize(new Dimension(500, 300));</span>
<span class="nc" id="L348">    dialog.setSize(new Dimension(800, 600));</span>
<span class="nc" id="L349">    dialog.setResizable(true);</span>
<span class="nc" id="L350">    dialog.setLocationRelativeTo(this);</span>
<span class="nc" id="L351">    dialog.setDefaultCloseOperation(2);</span>
<span class="nc" id="L352">    dialog.setVisible(true);</span>
<span class="nc" id="L353">  }</span>

<span class="nc" id="L355">  private JTextArea currentLogTextArea = null;</span>

  public void addMessage(final Level level, final String message) {
    try {
<span class="nc bnc" id="L359" title="All 2 branches missed.">      if (currentLogTextArea == null) {</span>
<span class="nc" id="L360">        currentLogTextArea = v_aiOutputLogArea;</span>
      }
<span class="nc" id="L362">      currentLogTextArea.append(message + &quot;\r\n&quot;);</span>
<span class="nc" id="L363">    } catch (final NullPointerException ex) // This is bad, but we don't want TripleA crashing because of this...</span>
    {
<span class="nc" id="L365">      System.out.print(&quot;Error adding Pro log message! Level: &quot; + level.getName() + &quot; Message: &quot; + message);</span>
    }
<span class="nc" id="L367">  }</span>

  public void notifyNewRound(final int roundNumber, final String name) {
<span class="nc" id="L370">    SwingAction.invokeAndWait(() -&gt; {</span>
<span class="nc" id="L371">      final JPanel newPanel = new JPanel();</span>
<span class="nc" id="L372">      final JScrollPane newScrollPane = new JScrollPane();</span>
<span class="nc" id="L373">      final JTextArea newTextArea = new JTextArea();</span>
<span class="nc" id="L374">      newTextArea.setColumns(20);</span>
<span class="nc" id="L375">      newTextArea.setRows(5);</span>
<span class="nc" id="L376">      newTextArea.setFont(new java.awt.Font(&quot;Segoe UI&quot;, 0, 10));</span>
<span class="nc" id="L377">      newTextArea.setEditable(false);</span>
<span class="nc" id="L378">      newScrollPane.getHorizontalScrollBar().setEnabled(true);</span>
<span class="nc" id="L379">      newScrollPane.setViewportView(newTextArea);</span>
<span class="nc" id="L380">      newPanel.setLayout(new GridLayout());</span>
<span class="nc" id="L381">      newPanel.add(newScrollPane);</span>
<span class="nc" id="L382">      v_logHolderTabbedPane.addTab(Integer.toString(roundNumber) + &quot;-&quot; + name, newPanel);</span>
<span class="nc" id="L383">      currentLogTextArea = newTextArea;</span>
<span class="nc" id="L384">    });</span>
    // Now remove round logging that has 'expired'.
    // Note that this method will also trim all but the first and last log panels if logging is turned off
    // (We always keep first round's log panel, and we keep last because the user might turn logging back on in the
    // middle of the round)
<span class="nc" id="L389">    trimLogRoundPanels();</span>
<span class="nc" id="L390">  }</span>

  private void trimLogRoundPanels() {
    // If we're logging and we have trimming enabled, or if we have logging turned off
<span class="nc bnc" id="L394" title="All 4 branches missed.">    if ((ProLogSettings.loadSettings().EnableAILogging &amp;&amp; ProLogSettings.loadSettings().LimitLogHistory)</span>
<span class="nc bnc" id="L395" title="All 2 branches missed.">        || !ProLogSettings.loadSettings().EnableAILogging) {</span>
      final int maxHistoryRounds;
<span class="nc bnc" id="L397" title="All 2 branches missed.">      if (ProLogSettings.loadSettings().EnableAILogging) {</span>
<span class="nc" id="L398">        maxHistoryRounds = ProLogSettings.loadSettings().LimitLogHistoryTo;</span>
<span class="nc" id="L399">      } else {</span>
<span class="nc" id="L400">        maxHistoryRounds = 1; // If we're not logging, trim to 1</span>
      }
<span class="nc" id="L402">      SwingAction.invokeAndWait(() -&gt; {</span>
<span class="nc bnc" id="L403" title="All 2 branches missed.">        for (int i = 0; i &lt; v_logHolderTabbedPane.getTabCount(); i++) {</span>
          // Remember, we never remove last tab, in case user turns logging back on in the middle of a round
<span class="nc bnc" id="L405" title="All 4 branches missed.">          if (i != 0 &amp;&amp; i &lt; v_logHolderTabbedPane.getTabCount() - maxHistoryRounds) {</span>
            // Remove the tab and decrease i by one, so the next component will be checked
<span class="nc" id="L407">            v_logHolderTabbedPane.removeTabAt(i);</span>
<span class="nc" id="L408">            i--;</span>
          }
        }
<span class="nc" id="L411">      });</span>
    }
<span class="nc" id="L413">  }</span>

  private javax.swing.JTextArea v_aiOutputLogArea;
  private javax.swing.JCheckBox v_enableAILogging;
  private javax.swing.JCheckBox v_limitLogHistoryCB;
  private javax.swing.JSpinner v_limitLogHistoryToSpinner;
  private javax.swing.JComboBox&lt;String&gt; v_logDepth;
  private javax.swing.JTabbedPane v_logHolderTabbedPane;
  private javax.swing.JTabbedPane v_tabPaneMain;
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span>test (25/nov/2016 10:16:58)</div></body></html>